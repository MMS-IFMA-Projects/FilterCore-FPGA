# Physical Constraints File (.lpf) for the Filter Core Project
# Board: Colorlight (P4 connector)
# FPGA: Lattice ECP5 LFE5U-45

# --- Main FPGA Clock (25MHz onboard oscillator) ---
LOCATE COMP "clk" SITE "P3";
IOBUF PORT "clk" IO_TYPE=LVCMOS33;
FREQUENCY PORT "clk" 25.0 MHz;

# --- Communication Interface with BitDogLab (6 pins) ---
LOCATE COMP "data_in[0]" SITE "F2";
IOBUF PORT "data_in[0]" IO_TYPE=LVCMOS33 PULLMODE=DOWN;
LOCATE COMP "data_in[1]" SITE "E4"; 
IOBUF PORT "data_in[1]" IO_TYPE=LVCMOS33 PULLMODE=DOWN;
LOCATE COMP "data_in[2]" SITE "F1";
IOBUF PORT "data_in[2]" IO_TYPE=LVCMOS33 PULLMODE=DOWN;
LOCATE COMP "data_in[3]" SITE "F3"; 
IOBUF PORT "data_in[3]" IO_TYPE=LVCMOS33 PULLMODE=DOWN;
LOCATE COMP "req_in" SITE "G3"; 
IOBUF PORT "req_in" IO_TYPE=LVCMOS33 PULLMODE=DOWN;
LOCATE COMP "ack_out" SITE "H3"; IOBUF PORT "ack_out" IO_TYPE=LVCMOS33 DRIVE=8;

# Assumes sensor is '1' (HIGH) when EMPTY, and pulls to '0' (GND) when WET.
LOCATE COMP "level_sensor_in" SITE "H4";
IOBUF PORT "level_sensor_in" IO_TYPE=LVCMOS33 PULLMODE=UP; 

# --- PWM Outputs for Actuators (2 Pumps) ---
LOCATE COMP "pwm_pump_a_out" SITE "J4"; IOBUF PORT "pwm_pump_a_out" IO_TYPE=LVCMOS33 DRIVE=8;
LOCATE COMP "pwm_pump_b_out" SITE "J5"; IOBUF PORT "pwm_pump_b_out" IO_TYPE=LVCMOS33 DRIVE=8;

# --- Reset ---
IOBUF PORT "reset" IO_TYPE=LVCMOS33 PULLMODE=DOWN;